# Server
PORT=3000
NODE_ENV=development
LOG_LEVEL=info  # Options: fatal, error, warn, info, debug, trace (default: warn in production, info in dev)
SESSION_SECRET=CHANGE_ME_GENERATE_WITH_OPENSSL_RAND  # Generate: openssl rand -base64 32
GUEST_DEFAULT_WALLET_ID=70e7a7ad-e667-45c0-a3f0-7c8b37e6db93
ALLOWED_ORIGINS=http://localhost:8080,https://localhost:8080

# HTTPS (optional - for production with self-signed or Let's Encrypt certs)
HTTPS_ENABLED=false
HTTPS_CERT=/path/to/cert.pem
HTTPS_KEY=/path/to/key.pem

# WebAuthn Configuration (required for passkey authentication)
RP_NAME=Yapt
RP_ID=localhost
ORIGIN=http://localhost:8080

# Database
# These match docker-compose.yml defaults
# Change these if you modify POSTGRES_USER/POSTGRES_PASSWORD below
DATABASE_URL=postgresql://defi_user:defi_password@localhost:5432/defi_tracker

# Docker Compose Postgres Configuration (optional - defaults shown)
# POSTGRES_USER=defi_user
# POSTGRES_PASSWORD=defi_password
# POSTGRES_DB=defi_tracker

# Ethereum RPC Configuration
#
# Option 1: Single RPC provider (simple) - REQUIRED
# Get your API key from: https://www.infura.io/ or https://www.alchemy.com/
ETH_RPC_URL=https://mainnet.infura.io/v3/YOUR_API_KEY_HERE
#
# Option 2: Multiple RPC providers (advanced - comma-separated)
# Provides automatic load balancing, rate limiting, and failover
# ETH_RPC_URLS=https://mainnet.infura.io/v3/KEY1,https://eth.llamarpc.com,https://rpc.ankr.com/eth
# ETH_RPC_LIMITS=10,5,8  # calls per second for each provider (must match URL count)
#
# Option 3: Database-managed providers (enterprise)
# Run migration and insert providers into rpc_provider table
# Database config takes precedence over environment variables

# Redis (for BullMQ)
REDIS_URL=redis://localhost:6379

# Scheduler - minute of the hour to run updates (0-59)
# Dev default: 38, Prod should use: 48
# Staggered timing prevents RPC rate limits when running multiple environments
UPDATE_CRON_MINUTE=38

# Stable price overrides (optional, JSON object)
# Example: Force specific prices instead of fetching from CoinGecko
# STABLE_PRICE_OVERRIDES={"USDC":"1.00","USDT":"1.00","DAI":"1.00","crvUSD":"1.00"}

# Push Notifications - iOS (APNs)
# Required for native iOS push notifications
# Get APNs credentials from Apple Developer Account:
# 1. Create an APNs Auth Key at https://developer.apple.com/account/resources/authkeys/list
# 2. Download the .p8 key file and note the Key ID and Team ID
APNS_KEY_PATH=/path/to/AuthKey_XXXXXXXXXX.p8
APNS_KEY_ID=XXXXXXXXXX
APNS_TEAM_ID=XXXXXXXXXX
APNS_BUNDLE_ID=com.yourcompany.yapt
#
# Note: ntfy.sh notifications (legacy) continue to work without APNs configuration
# APNs provides native iOS notifications when configured

# Advanced/Optional Configuration

# Session store (default: memory, set to "redis" for production persistence)
# SESSION_STORE=memory

# Enable third-party plugin loading (default: false)
# ENABLE_THIRD_PARTY_PLUGINS=false

# Minimum interval between RPC calls in milliseconds (default: 1000)
# RPC_MIN_INTERVAL_MS=1000

# Custom Multicall3 contract address (default: 0xcA11bde05977b3631167028862bE2a173976CA11)
# MULTICALL3_ADDRESS=0xcA11bde05977b3631167028862bE2a173976CA11
